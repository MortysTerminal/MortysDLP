<Window x:Class="MortysDLP.Views.ConvertWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Konvertieren" 
        MinHeight="600"
        MinWidth="1400"
        WindowStartupLocation="CenterOwner">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>  <!-- Block: Dateiauswahl -->
            <RowDefinition Height="Auto"/>  <!-- Block: Zielformat und Pfad -->
            <RowDefinition Height="Auto"/>  <!-- Block: Qualitätsoptionen -->
            <RowDefinition Height="Auto"/>  <!-- Block: Steuerung -->
            <RowDefinition Height="Auto"/>     <!-- Block: Debug-Ausgabe -->
        </Grid.RowDefinitions>

        <!-- Block 1: Dateien auswählen -->
        <GroupBox Header="1. Dateien zum Konvertieren auswählen" Grid.Row="0" Margin="0,0,0,10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <DataGrid x:Name="dgFiles" AutoGenerateColumns="False" IsReadOnly="True" Grid.Row="0" SelectionMode="Extended"
                          MinHeight="100" MaxHeight="240" Margin="10">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Dateiname" Binding="{Binding Name}" Width="*"/>
                        <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="120"/>
                        <DataGridTemplateColumn Header="Fortschritt" Width="120">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <ProgressBar Value="{Binding Progress}" Maximum="100" Height="18"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
                <StackPanel Orientation="Horizontal" Grid.Row="1" HorizontalAlignment="Right" Margin="7">
                    <Button Content="Dateien hinzufügen" Click="btnAddFiles_Click" Margin="4"/>
                    <Button x:Name="btnRemoveFiles" Content="Entfernen" Click="btnRemoveFiles_Click" Margin="4"/>
                    <Button x:Name="btnClearFiles" Content="Liste leeren" Click="btnClearFiles_Click" Margin="4"/>
                </StackPanel>
            </Grid>
        </GroupBox>

        <!-- Block 2: Zielformat und Pfad -->
        <GroupBox Header="2. Zielformat und Zielordner wählen" Grid.Row="1" Margin="7">
            <StackPanel Orientation="Horizontal" Margin="0,0,7,0">
                <Label Content="Zielformat:" VerticalAlignment="Center"/>
                <ComboBox x:Name="cbTargetFormat" Width="120" Margin="10,0" SelectionChanged="cbTargetFormat_SelectionChanged"/>
                <Label Content="Zielordner:" VerticalAlignment="Center" Margin="20,0,0,0"/>
                <TextBox x:Name="tbTargetFolder" Width="400" Height="35" Margin="7,0,0,0"/>
                <Button Content="Durchsuchen..." Click="btnBrowseTargetFolder_Click" Margin="7,0,0,0"/>
                <!--<Button Content="Downloadpfad übernehmen" Click="btnUseSavedDownloadpath_Click" Margin="7,0,0,0"/>
                <Button Content="Audio-Only-Pfad übernehmen" Click="btnUseSavedAudioOnlyPath_Click" Margin="7,0,0,0"/>-->
                <Button Content="Ordner öffnen" Click="btnOpenTargetFolder_Click" Margin="7,0,7,0"/>
                <Border BorderBrush="LightGray" BorderThickness="1" CornerRadius="5" Padding="4">
                    <StackPanel>
                        <TextBlock Text="Pfad übernehmen:" FontWeight="Bold" Margin="7"/>
                        <StackPanel Orientation="Horizontal">
                            <Button Content="Downloadpfad" Click="btnUseSavedDownloadpath_Click" Width="160" Margin="7"/>
                            <Button Content="Audio-Only-Pfad" Click="btnUseSavedAudioOnlyPath_Click" Width="180" Margin="7"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>
            
        </GroupBox>

        
                
            

        <!-- Block 3: Qualitätsoptionen -->
        <GroupBox Header="3. Qualitätsoptionen (optional)" Grid.Row="2" Margin="7">
            <StackPanel Orientation="Horizontal" Margin="10">
                <Label Content="Videoqualität:" VerticalAlignment="Center"/>
                <ComboBox x:Name="cbVideoQuality" Width="150" Margin="10,0">
                    <ComboBoxItem Content="Original (verlustfrei)" IsSelected="True"/>
                    <ComboBoxItem Content="1080p"/>
                    <ComboBoxItem Content="720p"/>
                    <ComboBoxItem Content="480p"/>
                    <ComboBoxItem Content="360p"/>
                </ComboBox>
                <Label Content="Audioqualität:" VerticalAlignment="Center" Margin="20,0,0,0"/>
                <ComboBox x:Name="cbAudioQuality" Width="150" Margin="10,0">
                    <ComboBoxItem Content="Original (verlustfrei)" IsSelected="True"/>
                    <ComboBoxItem Content="320k"/>
                    <ComboBoxItem Content="192k"/>
                    <ComboBoxItem Content="128k"/>
                    <ComboBoxItem Content="64k"/>
                </ComboBox>
            </StackPanel>
        </GroupBox>

        <!-- Block 4: Steuerung -->
        <StackPanel Orientation="Horizontal" Grid.Row="3" HorizontalAlignment="Right" Margin="7">
            <Button x:Name="btnConvertStart" Content="Konvertierung starten" Click="btnConvertStart_Click" Margin="4"/>
            <Button x:Name="btnConvertCancel" Content="Konvertierung abbrechen" Click="btnConvertCancel_Click" Margin="4"/>
        </StackPanel>

        <!-- Block 5: Debug-Ausgabe (jetzt immer ganz unten) -->
        <Expander Header="Debug-Ausgabe" IsExpanded="False" Margin="0,0,0,10" Grid.Row="4">
            <Border BorderBrush="LightGray" BorderThickness="1" Padding="5">
                <ScrollViewer MaxHeight="200" VerticalScrollBarVisibility="Auto">
                    <TextBox x:Name="tbDebugOutput"
                             IsReadOnly="True"
                             TextWrapping="Wrap"
                             VerticalScrollBarVisibility="Auto"
                             Background="Black"
                             Foreground="LightGray"
                             FontFamily="Consolas"
                             FontSize="12"/>
                </ScrollViewer>
            </Border>
        </Expander>
    </Grid>
</Window>